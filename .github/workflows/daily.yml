name: Hourly Job

on:
  schedule:
    - cron: "0 * * * *"   # Her saat başı (UTC)
  workflow_dispatch:      # Manuel tetikleme opsiyonu

jobs:
  run:
    runs-on: ubuntu-latest

    steps:  
      # 1️⃣ Repo’yu çek  
      - name: Checkout repository  
        uses: actions/checkout@v4  

      # 2️⃣ Python kurulumu  
      - name: Setup Python  
        uses: actions/setup-python@v5  
        with:  
          python-version: "3.11"  

      # 3️⃣ Gereksinimleri kur  
      - name: Install dependencies  
        run: pip install -r requirements.txt  

      # 4️⃣ Python scriptini çalıştır  
      - name: Run main.py  
        run: python main.py  

      # 5️⃣ www/ klasörünü commit ve push et  
      - name: Commit and push www/  
        uses: ad-m/github-push-action@v0.6.0  
        with:  
          github_token: ${{ secrets.PAT_TOKEN }}  
          branch: main  
          directory: www  
          force: true
          commit_message: "Otomatik güncelleme - saatlik"
          
